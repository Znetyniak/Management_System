{% extends 'base.html' %}
{% block title %}Trips{% endblock %}

{% block content %}
<h1>Trips</h1>

{# ---- Visible only for admin ---- #}
{% if session.get("role") == "admin" %}
  <a class="button" href="{{ url_for('admin.add_trip') }}">Add trip (Admin)</a>
{% endif %}

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>Route</th>
      <th>Vehicle</th>
      <th>Driver</th>
      <th>Distance</th>
    </tr>
  </thead>

  <tbody>
    {% for t in trips %}
    <tr>
      <td>{{ t.id }}</td>
      <td>{{ t.date }}</td>
      <td>{{ t.route }}</td>
      <td>{{ t.vehicle.brand }} {{ t.vehicle.model }}</td>
      <td>{{ t.driver.full_name }}</td>
      <td>{{ t.distance_km }}</td>
    </tr>
    {% else %}
    <tr>
      <td colspan="6">No trips</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
